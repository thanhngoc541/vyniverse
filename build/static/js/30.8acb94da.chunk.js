"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[30],{7030:function(e,t,r){r.r(t),r.d(t,{CameraPreview:function(){return f},CameraPreviewWeb:function(){return d}});var n=r(5861),a=r(5671),i=r(3144),u=r(136),o=r(9388),c=r(7757),s=r.n(c),p=r(6653),d=function(e){(0,u.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,a.Z)(this,r),t.call(this,{name:"CameraPreview",platforms:["web"]})}return(0,i.Z)(r,[{key:"start",value:function(){var e=(0,n.Z)(s().mark((function e(t){var r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,n.Z)(s().mark((function e(n,a){var i,u,o,c,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!t.disableAudio,video:!0}).then((function(e){e.getTracks().forEach((function(e){return e.stop()}))})).catch((function(e){a(e)}));case 2:i=document.getElementById("video"),u=document.getElementById(t.parent),i?a({message:"camera already started"}):((o=document.createElement("video")).id="video",o.setAttribute("class",t.className||""),"rear"!==t.position&&o.setAttribute("style","-webkit-transform: scaleX(-1); transform: scaleX(-1);"),c=navigator.userAgent.toLowerCase(),c.includes("safari")&&!c.includes("chrome")&&(o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true")),u.appendChild(o),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(p={video:!0},"rear"===t.position?(p.video={facingMode:"environment"},r.isBackCamera=!0):r.isBackCamera=!1,navigator.mediaDevices.getUserMedia(p).then((function(e){o.srcObject=e,o.play(),n({})}),(function(e){a(e)}))));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,n.Z)(s().mark((function e(){var t,r,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("video")){for(t.pause(),r=t.srcObject,n=r.getTracks(),a=0;a<n.length;a++)n[a].stop();t.remove()}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"capture",value:function(){var e=(0,n.Z)(s().mark((function e(t){var r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=document.getElementById("video"),a=document.createElement("canvas"),i=a.getContext("2d");a.width=n.videoWidth,a.height=n.videoHeight,r.isBackCamera||(i.translate(n.videoWidth,0),i.scale(-1,1)),i.drawImage(n,0,0,n.videoWidth,n.videoHeight),e({value:a.toDataURL("image/png").replace("data:image/png;base64,","")})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"captureSample",value:function(){var e=(0,n.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.capture(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSupportedFlashModes",value:function(){var e=(0,n.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getSupportedFlashModes not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setFlashMode",value:function(){var e=(0,n.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setFlashMode not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"flip",value:function(){var e=(0,n.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("flip not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setOpacity",value:function(){var e=(0,n.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=document.getElementById("video"))&&t.opacity&&r.style.setProperty("opacity",t.opacity.toString());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(p.Uw),f=new d;(0,p.fK)(f)}}]);
//# sourceMappingURL=30.8acb94da.chunk.js.map