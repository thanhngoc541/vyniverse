"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[30],{7030:function(e,t,r){r.r(t),r.d(t,{CameraPreview:function(){return d},CameraPreviewWeb:function(){return p}});var n=r(4165),a=r(5861),i=r(5671),u=r(3144),o=r(136),c=r(9388),s=r(6653),p=function(e){(0,o.Z)(r,e);var t=(0,c.Z)(r);function r(){return(0,i.Z)(this,r),t.call(this,{name:"CameraPreview",platforms:["web"]})}return(0,u.Z)(r,[{key:"start",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(a,i){var u,o,c,s,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!t.disableAudio,video:!0}).then((function(e){e.getTracks().forEach((function(e){return e.stop()}))})).catch((function(e){i(e)}));case 2:u=document.getElementById("video"),o=document.getElementById(t.parent),u?i({message:"camera already started"}):((c=document.createElement("video")).id="video",c.setAttribute("class",t.className||""),"rear"!==t.position&&c.setAttribute("style","-webkit-transform: scaleX(-1); transform: scaleX(-1);"),s=navigator.userAgent.toLowerCase(),s.includes("safari")&&!s.includes("chrome")&&(c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true")),o.appendChild(c),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(p={video:{width:{ideal:t.width},height:{ideal:t.height}}},"rear"===t.position?(p.video.facingMode="environment",r.isBackCamera=!0):r.isBackCamera=!1,navigator.mediaDevices.getUserMedia(p).then((function(e){c.srcObject=e,c.play(),a({})}),(function(e){i(e)}))));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("video")){for(t.pause(),r=t.srcObject,a=r.getTracks(),i=0;i<a.length;i++)a[i].stop();t.remove()}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"capture",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=document.getElementById("video"),i=document.createElement("canvas"),u=i.getContext("2d");i.width=a.videoWidth,i.height=a.videoHeight,r.isBackCamera||(u.translate(a.videoWidth,0),u.scale(-1,1)),u.drawImage(a,0,0,a.videoWidth,a.videoHeight),e({value:void 0!=t.quality?i.toDataURL("image/jpeg",t.quality/100).replace("data:image/jpeg;base64,",""):i.toDataURL("image/png").replace("data:image/png;base64,","")})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"captureSample",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.capture(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSupportedFlashModes",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getSupportedFlashModes not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setFlashMode",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setFlashMode not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"flip",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("flip not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setOpacity",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=document.getElementById("video"))&&t.opacity&&r.style.setProperty("opacity",t.opacity.toString());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(s.Uw),d=new p;(0,s.fK)(d)}}]);
//# sourceMappingURL=30.d0b04d96.chunk.js.map